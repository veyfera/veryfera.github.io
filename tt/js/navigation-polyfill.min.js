/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/@virtualstate/navigation@1.0.1-alpha.200/esnext/polyfill-rollup.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
let globalNavigation;if("undefined"!=typeof window&&window.navigation){const t=window.navigation;assertNavigation(t),globalNavigation=t}function assertNavigation(t){if(!t)throw new Error("Expected Navigation")}function isEvent(t){return function(t){return!!t}(t)&&("string"==typeof t.type||"symbol"==typeof t.type)}function assertEvent(t,n){if(!isEvent(t))throw new Error("Expected event");if(void 0!==n&&t.type!==n)throw new Error(`Expected event type ${String(n)}, got ${t.type.toString()}`)}function isParallelEvent(t){return isEvent(t)&&!1!==t.parallel}class AbortError extends Error{constructor(t){super("AbortError"+(t?`: ${t}`:"")),this.name="AbortError"}}function isAbortError(t){return t instanceof Error&&"AbortError"===t.name}class InvalidStateError extends Error{constructor(t){super("InvalidStateError"+(t?`: ${t}`:"")),this.name="InvalidStateError"}}function isInvalidStateError(t){return t instanceof Error&&"InvalidStateError"===t.name}function isAbortSignal(t){return function(t){return"object"==typeof t}(t)&&"boolean"==typeof t.aborted&&"function"==typeof t.addEventListener}function isSignalEvent(t){return isEvent(t)&&function(t){return t.hasOwnProperty("signal")}(t)&&isAbortSignal(t.signal)}function isSignalHandled(t,n){if(isSignalEvent(t)&&t.signal.aborted&&n instanceof Error&&isAbortError(n))return!0}const EventTargetListeners$1=Symbol.for("@opennetwork/environment/events/target/listeners"),EventTargetListenersIgnore=Symbol.for("@opennetwork/environment/events/target/listeners/ignore"),EventTargetListenersMatch=Symbol.for("@opennetwork/environment/events/target/listeners/match"),EventTargetListenersThis=Symbol.for("@opennetwork/environment/events/target/listeners/this"),EventDescriptorSymbol=Symbol.for("@opennetwork/environment/events/descriptor");function matchEventCallback(t,n,i){const e=function(t){return function(t){return!!t}(t)&&!0===t[EventDescriptorSymbol]}(i)?i:void 0;return i=>e?e===i:(!n||n===i.callback)&&t===i.type}function isFunctionEventCallback(t){return"function"==typeof t}const EventTargetDescriptors=Symbol.for("@virtualstate/navigation/event-target/descriptors");class EventTargetListeners{[EventTargetDescriptors]=[];[EventTargetListenersIgnore]=new WeakSet;get[EventTargetListeners$1](){return[...this[EventTargetDescriptors]??[]]}[EventTargetListenersMatch](t){const n=this[EventTargetListeners$1],i=[...new Set([...n??[],...this[EventTargetDescriptors]??[]])].filter((n=>n.type===t||"*"===n.type)).filter((t=>!this[EventTargetListenersIgnore]?.has(t))),e="string"==typeof t?this[`on${t}`]:void 0;return"function"==typeof e&&isFunctionEventCallback(e)&&i.push({type:t,callback:e,[EventDescriptorSymbol]:!0}),i}addEventListener(t,n,i){const e={...i,isListening:()=>!!this[EventTargetDescriptors]?.find(matchEventCallback(t,n)),descriptor:{[EventDescriptorSymbol]:!0,...i,type:t,callback:n},timestamp:Date.now()};e.isListening()||this[EventTargetDescriptors]?.push(e.descriptor)}removeEventListener(t,n,i){if(!isFunctionEventCallback(n))return;const e=this[EventTargetListeners$1]??this[EventTargetDescriptors]??[],r=e.findIndex(matchEventCallback(t,n,i));if(-1===r)return;const a=this[EventTargetDescriptors]?.findIndex(matchEventCallback(t,n,i))??-1;-1!==a&&this[EventTargetDescriptors]?.splice(a,1);const o=e[r];o&&this[EventTargetListenersIgnore]?.add(o)}hasEventListener(t,n){if(n&&!isFunctionEventCallback(n))return!1;return(this[EventTargetDescriptors]?.findIndex(matchEventCallback(t,n))??-1)>-1}}class AsyncEventTarget extends EventTargetListeners{[EventTargetListenersThis];constructor(t=void 0){super(),this[EventTargetListenersThis]=t}async dispatchEvent(t){const n=this[EventTargetListenersMatch]?.(t.type)??[];if(isSignalEvent(t)&&t.signal.aborted)throw new AbortError;const i=isParallelEvent(t),e=[];for(let r=0;r<n.length;r+=1){const a=n[r],o=(async()=>{a.once&&this.removeEventListener(a.type,a.callback,a),await a.callback.call(this[EventTargetListenersThis]??this,t)})();if(i)e.push(o);else{try{await o}catch(n){isSignalHandled(t,n)||await Promise.reject(n)}if(isSignalEvent(t)&&t.signal.aborted)return}}if(e.length){const n=(await Promise.allSettled(e)).filter((t=>"rejected"===t.status));if(n.length){let i=n;if(isSignalEvent(t)&&t.signal.aborted&&(i=i.filter((n=>!isSignalHandled(t,n.reason)))),1===i.length)throw await Promise.reject(i[0].reason),i[0].reason;if(i.length>1)throw new AggregateError(i.map((({reason:t})=>t)))}}}}const defaultEventTargetModule={EventTarget:AsyncEventTarget,AsyncEventTarget:AsyncEventTarget,SyncEventTarget:AsyncEventTarget};let eventTargetModule=defaultEventTargetModule;const EventTargetImplementation=eventTargetModule.EventTarget||eventTargetModule.SyncEventTarget||eventTargetModule.AsyncEventTarget;function assertEventTarget(t){if("function"!=typeof t)throw new Error("Could not load EventTarget implementation")}class EventTarget extends AsyncEventTarget{constructor(...t){if(super(),EventTargetImplementation){assertEventTarget(EventTargetImplementation);const{dispatchEvent:n}=new EventTargetImplementation(...t);this.dispatchEvent=n}}}class NavigationEventTarget extends EventTarget{addEventListener(t,n,i){return function(t){if("function"!=typeof t)throw new Error("Please us the function variant of event listener")}(n),super.addEventListener(t,n,"boolean"==typeof i?{once:i}:i)}removeEventListener(t,n,i){return function(t){if("function"!=typeof t)throw new Error("Please us the function variant of event listener")}(n),super.removeEventListener(t,n)}}const fakeUUID={v4:()=>Array.from({length:5},(()=>`${Math.random()}`.replace(/^0\./,""))).join("-").replace(".","")};async function getImportUUIDOrNodeRandomUUID(){const{v4:t}=await Promise.resolve().then((function(){return importUuid})).catch((async()=>{const t=await import("node:crypto");return{v4:()=>t.randomUUID()}})).catch((async()=>Promise.resolve().then((function(){return index})))).catch((()=>{})).then((t=>t??fakeUUID));return{v4:t}}const getUuidModule=()=>index;function v4$2(){const t=getUuidModule();return t?.v4?t.v4():fakeUUID.v4()}const NavigationGetState$1=Symbol.for("@virtualstate/navigation/getState"),NavigationHistoryEntryNavigationType=Symbol.for("@virtualstate/navigation/entry/navigationType"),NavigationHistoryEntryKnownAs=Symbol.for("@virtualstate/navigation/entry/knownAs"),NavigationHistoryEntrySetState=Symbol.for("@virtualstate/navigation/entry/setState");function isPrimitiveValue(t){return"number"==typeof t||"boolean"==typeof t||"symbol"==typeof t||"bigint"==typeof t||"string"==typeof t}function isValue(t){return!(!t&&!isPrimitiveValue(t))}class NavigationHistoryEntry extends NavigationEventTarget{#t;#n;get index(){return"number"==typeof this.#t?this.#t:this.#t()}key;id;url;sameDocument;get[NavigationHistoryEntryNavigationType](){return this.#i.navigationType}get[NavigationHistoryEntryKnownAs](){const t=new Set(this.#i[NavigationHistoryEntryKnownAs]);return t.add(this.id),t}#i;get[EventTargetListeners$1](){return[...super[EventTargetListeners$1]??[],...this.#i[EventTargetListeners$1]??[]]}constructor(t){super(),this.#i=t,this.key=t.key||v4$2(),this.id=v4$2(),this.url=t.url??void 0,this.#t=t.index,this.sameDocument=t.sameDocument??!0,this.#n=t.state??void 0}[NavigationGetState$1](){return this.#i?.getState?.(this)}getState(){let t=this.#n;if(!isValue(t)){const n=this[NavigationGetState$1]();isValue(n)&&(t=this.#n=n)}return void 0===t||isPrimitiveValue(t)?t:("function"==typeof t&&(console.warn("State passed to Navigation.navigate was a function, this may be unintentional"),console.warn("Unless a state value is primitive, with a standard implementation of Navigation"),console.warn("your state value will be serialized and deserialized before this point, meaning"),console.warn("a function would not be usable.")),{...t})}[NavigationHistoryEntrySetState](t){this.#n=t}}function deferred(t){let n,i;const e=new Promise(((t,e)=>{n=t,i=e}));return ok$1(n),ok$1(i),{resolve:n,reject:i,promise:t?e.catch(t):e}}function ok$1(t){if(!t)throw new Error("Value not provided")}const GlobalAbortController="undefined"!=typeof AbortController?AbortController:void 0;if(!GlobalAbortController)throw new Error("AbortController expected to be available or polyfilled");const AbortController$1=GlobalAbortController;function isPromise(t){return like(t)&&"function"==typeof t.then}function ok(t,n="Expected value"){if(!t)throw new Error(n)}function isPromiseRejectedResult(t){return"rejected"===t.status}function like(t){return!!t}const Rollback=Symbol.for("@virtualstate/navigation/rollback"),Unset=Symbol.for("@virtualstate/navigation/unset"),NavigationTransitionParentEventTarget=Symbol.for("@virtualstate/navigation/transition/parentEventTarget"),NavigationTransitionFinishedDeferred=Symbol.for("@virtualstate/navigation/transition/deferred/finished"),NavigationTransitionCommittedDeferred=Symbol.for("@virtualstate/navigation/transition/deferred/committed"),NavigationTransitionNavigationType=Symbol.for("@virtualstate/navigation/transition/navigationType"),NavigationTransitionInitialEntries=Symbol.for("@virtualstate/navigation/transition/entries/initial"),NavigationTransitionFinishedEntries=Symbol.for("@virtualstate/navigation/transition/entries/finished"),NavigationTransitionInitialIndex=Symbol.for("@virtualstate/navigation/transition/index/initial"),NavigationTransitionFinishedIndex=Symbol.for("@virtualstate/navigation/transition/index/finished"),NavigationTransitionEntry=Symbol.for("@virtualstate/navigation/transition/entry"),NavigationTransitionIsCommitted=Symbol.for("@virtualstate/navigation/transition/isCommitted"),NavigationTransitionIsFinished=Symbol.for("@virtualstate/navigation/transition/isFinished"),NavigationTransitionIsRejected=Symbol.for("@virtualstate/navigation/transition/isRejected"),NavigationTransitionKnown=Symbol.for("@virtualstate/navigation/transition/known"),NavigationTransitionPromises=Symbol.for("@virtualstate/navigation/transition/promises"),NavigationIntercept=Symbol.for("@virtualstate/navigation/intercept"),NavigationTransitionIsOngoing=Symbol.for("@virtualstate/navigation/transition/isOngoing"),NavigationTransitionIsPending=Symbol.for("@virtualstate/navigation/transition/isPending"),NavigationTransitionIsAsync=Symbol.for("@virtualstate/navigation/transition/isAsync"),NavigationTransitionWait=Symbol.for("@virtualstate/navigation/transition/wait"),NavigationTransitionPromiseResolved=Symbol.for("@virtualstate/navigation/transition/promise/resolved"),NavigationTransitionRejected=Symbol.for("@virtualstate/navigation/transition/rejected"),NavigationTransitionCommit=Symbol.for("@virtualstate/navigation/transition/commit"),NavigationTransitionFinish=Symbol.for("@virtualstate/navigation/transition/finish"),NavigationTransitionStart=Symbol.for("@virtualstate/navigation/transition/start"),NavigationTransitionStartDeadline=Symbol.for("@virtualstate/navigation/transition/start/deadline"),NavigationTransitionError=Symbol.for("@virtualstate/navigation/transition/error"),NavigationTransitionFinally=Symbol.for("@virtualstate/navigation/transition/finally"),NavigationTransitionAbort=Symbol.for("@virtualstate/navigation/transition/abort"),NavigationTransitionInterceptOptionsCommit=Symbol.for("@virtualstate/navigation/transition/intercept/options/commit"),NavigationTransitionCommitIsManual=Symbol.for("@virtualstate/navigation/transition/commit/isManual");class NavigationTransition extends EventTarget{finished;committed;from;navigationType;[NavigationTransitionIsAsync]=!1;[NavigationTransitionInterceptOptionsCommit];#i;[NavigationTransitionFinishedDeferred]=deferred();[NavigationTransitionCommittedDeferred]=deferred();get[NavigationTransitionIsPending](){return!!this.#e.size}get[NavigationTransitionNavigationType](){return this.#i[NavigationTransitionNavigationType]}get[NavigationTransitionInitialEntries](){return this.#i[NavigationTransitionInitialEntries]}get[NavigationTransitionInitialIndex](){return this.#i[NavigationTransitionInitialIndex]}get[NavigationTransitionCommitIsManual](){return!(!this[NavigationTransitionInterceptOptionsCommit]?.includes("after-transition")&&!this[NavigationTransitionInterceptOptionsCommit]?.includes("manual"))}[NavigationTransitionFinishedEntries];[NavigationTransitionFinishedIndex];[NavigationTransitionIsCommitted]=!1;[NavigationTransitionIsFinished]=!1;[NavigationTransitionIsRejected]=!1;[NavigationTransitionIsOngoing]=!1;[NavigationTransitionKnown]=new Set;[NavigationTransitionEntry];#e=new Set;#r=!1;#a=new AbortController$1;get signal(){return this.#a.signal}get[NavigationTransitionPromises](){return this.#e}constructor(t){super(),this[NavigationTransitionInterceptOptionsCommit]=[],this[NavigationTransitionFinishedDeferred]=t[NavigationTransitionFinishedDeferred]??this[NavigationTransitionFinishedDeferred],this[NavigationTransitionCommittedDeferred]=t[NavigationTransitionCommittedDeferred]??this[NavigationTransitionCommittedDeferred],this.#i=t;const n=this.finished=this[NavigationTransitionFinishedDeferred].promise,i=this.committed=this[NavigationTransitionCommittedDeferred].promise;n.catch((t=>t)),i.catch((t=>t)),this.from=t.from,this.navigationType=t.navigationType,this[NavigationTransitionFinishedEntries]=t[NavigationTransitionFinishedEntries],this[NavigationTransitionFinishedIndex]=t[NavigationTransitionFinishedIndex];const e=t[NavigationTransitionKnown];if(e)for(const t of e)this[NavigationTransitionKnown].add(t);this[NavigationTransitionEntry]=t[NavigationTransitionEntry],this.addEventListener(NavigationTransitionCommit,this.#o,{once:!0}),this.addEventListener(NavigationTransitionFinish,this.#s,{once:!0}),this.addEventListener(NavigationTransitionCommit,this.#c,{once:!0}),this.addEventListener(NavigationTransitionFinish,this.#g,{once:!0}),this.addEventListener(NavigationTransitionError,this.#l,{once:!0}),this.addEventListener(NavigationTransitionAbort,(()=>{if(!this[NavigationTransitionIsFinished])return this[NavigationTransitionRejected](new AbortError)})),this.addEventListener("*",this[NavigationTransitionEntry].dispatchEvent.bind(this[NavigationTransitionEntry])),this.addEventListener("*",t[NavigationTransitionParentEventTarget].dispatchEvent.bind(t[NavigationTransitionParentEventTarget]))}rollback=t=>{if(this.#r)throw new InvalidStateError("Rollback invoked multiple times: Please raise an issue at https://github.com/virtualstate/navigation with the use case where you want to use a rollback multiple times, this may have been unexpected behaviour");return this.#r=!0,this.#i.rollback(t)};#c=()=>{this[NavigationTransitionIsCommitted]=!0};#g=()=>{this[NavigationTransitionIsFinished]=!0};#s=()=>{this[NavigationTransitionFinishedDeferred].resolve(this[NavigationTransitionEntry])};#o=()=>{this.signal.aborted||this[NavigationTransitionCommittedDeferred].resolve(this[NavigationTransitionEntry])};#l=t=>this[NavigationTransitionRejected](t.error);[NavigationTransitionPromiseResolved]=(...t)=>{for(const n of t)this.#e.delete(n)};[NavigationTransitionRejected]=async t=>{if(this[NavigationTransitionIsRejected])return;this[NavigationTransitionIsRejected]=!0,this[NavigationTransitionAbort]();const n=this[NavigationTransitionNavigationType];if(!("string"!=typeof n&&n!==Rollback||(await this.dispatchEvent({type:"navigateerror",error:t,get message(){return t instanceof Error?t.message:`${t}`}}),n===Rollback||isInvalidStateError(t)||isAbortError(t))))try{await(this.rollback()?.finished)}catch(t){throw new InvalidStateError("Failed to rollback, please raise an issue at https://github.com/virtualstate/navigation/issues")}this[NavigationTransitionCommittedDeferred].reject(t),this[NavigationTransitionFinishedDeferred].reject(t)};[NavigationIntercept]=t=>{const n=this,i=function(){if(!t)return;if(isPromise(t))return t;if("function"==typeof t)return t();const{handler:i,commit:e}=t;e&&"string"==typeof e&&n[NavigationTransitionInterceptOptionsCommit].push(e);if("function"!=typeof i)return;return i()}();if(this[NavigationTransitionIsOngoing]=!0,!i)return;this[NavigationTransitionIsAsync]=!0;const e=i.then((()=>({status:"fulfilled",value:void 0}))).catch((async t=>(await this[NavigationTransitionRejected](t),{status:"rejected",reason:t})));this.#e.add(e)};[NavigationTransitionWait]=async()=>{if(!this.#e.size)return this[NavigationTransitionEntry];try{const t=[...this.#e],n=(await Promise.all(t)).filter((t=>"rejected"===t.status));if(n.length){if(1===n.length)throw n[0].reason;if("undefined"!=typeof AggregateError)throw new AggregateError(n.map((({reason:t})=>t)));throw new Error}return this[NavigationTransitionPromiseResolved](...t),this[NavigationTransitionIsPending]?this[NavigationTransitionWait]():this[NavigationTransitionEntry]}catch(t){throw await this.#l(t),await Promise.reject(t)}finally{await this[NavigationTransitionFinish]()}};[NavigationTransitionAbort](){this.#a.signal.aborted||(this.#a.abort(),this.dispatchEvent({type:NavigationTransitionAbort,transition:this,entry:this[NavigationTransitionEntry]}))}[NavigationTransitionFinish]=async()=>{this[NavigationTransitionIsFinished]||await this.dispatchEvent({type:NavigationTransitionFinish,transition:this,entry:this[NavigationTransitionEntry],intercept:this[NavigationIntercept]})}}function getWindowBaseURL(){try{if("undefined"!=typeof window&&window.location)return window.location.href}catch{}}function getBaseURL(t){const n=getWindowBaseURL()??"https://html.spec.whatwg.org/";return new URL((t??"").toString(),n)}function defer(){let t,n,i=!1,e="pending";const r=new Promise(((r,a)=>{t=t=>{e="fulfilled",i=!0,r(t)},n=t=>{e="rejected",i=!0,a(t)}}));return ok(t),ok(n),{get settled(){return i},get status(){return e},resolve:t,reject:n,promise:r}}class NavigationCurrentEntryChangeEvent{type;from;navigationType;constructor(t,n){if(this.type=t,!n)throw new TypeError("init required");if(!n.from)throw new TypeError("from required");this.from=n.from,this.navigationType=n.navigationType??void 0}}class NavigateEvent{type;canIntercept;canTransition;destination;downloadRequest;formData;hashChange;info;signal;userInitiated;navigationType;constructor(t,n){if(this.type=t,!n)throw new TypeError("init required");if(!n.destination)throw new TypeError("destination required");if(!n.signal)throw new TypeError("signal required");this.canIntercept=n.canIntercept??!1,this.canTransition=n.canIntercept??!1,this.destination=n.destination,this.downloadRequest=n.downloadRequest,this.formData=n.formData,this.hashChange=n.hashChange??!1,this.info=n.info,this.signal=n.signal,this.userInitiated=n.userInitiated??!1,this.navigationType=n.navigationType??"push"}commit(){throw new Error("Not implemented")}intercept(t){throw new Error("Not implemented")}preventDefault(){throw new Error("Not implemented")}reportError(t){throw new Error("Not implemented")}scroll(){throw new Error("Not implemented")}transitionWhile(t){return this.intercept(t)}}const NavigationFormData=Symbol.for("@virtualstate/navigation/formData"),NavigationDownloadRequest=Symbol.for("@virtualstate/navigation/downloadRequest"),NavigationCanIntercept=Symbol.for("@virtualstate/navigation/canIntercept"),NavigationUserInitiated=Symbol.for("@virtualstate/navigation/userInitiated"),NavigationOriginalEvent=Symbol.for("@virtualstate/navigation/originalEvent");function noop(){}function getEntryIndex(t,n){const i=n.index;return-1!==i?i:-1}function createNavigationTransition(t){const{commit:n,currentIndex:i,options:e,known:r,currentEntry:a,transition:o,transition:{[NavigationTransitionInitialEntries]:s,[NavigationTransitionEntry]:c,[NavigationIntercept]:g},reportError:l}=t;let{transition:{[NavigationTransitionNavigationType]:v}}=t,u=[...s];const d=new Set(r);let h=-1,f=i;if(v===Rollback){const{index:t}=e??{index:void 0};if("number"!=typeof t)throw new InvalidStateError("Expected index to be provided for rollback");h=t,f=t}else"traverse"===v||"reload"===v?(h=getEntryIndex(s,c),f=h):"replace"===v?-1===i?(v="push",h=i+1,f=h):(h=i,f=i):(h=i+1,f=h);if("number"!=typeof h||-1===h)throw new InvalidStateError("Could not resolve next index");if(!c.url)throw console.trace({navigationType:v,entry:c,options:e}),new InvalidStateError("Expected entry url");const p={url:c.url,key:c.key,index:h,sameDocument:c.sameDocument,getState:()=>c.getState()};let y=!1;const m=getBaseURL(a?.url),E=new URL(p.url);if(m.hash!==E.hash){const t=new URL(m.toString());t.hash="";const n=new URL(E.toString());n.hash="",y=t.toString()===n.toString()}let T;const{resolve:N,promise:w}=defer();function b(){ok(T,"Expected contextToCommit"),N(n(T))}const S=new AbortController$1,I=new NavigateEvent("navigate",{signal:S.signal,info:void 0,...e,canIntercept:e?.[NavigationCanIntercept]??!0,formData:e?.[NavigationFormData]??void 0,downloadRequest:e?.[NavigationDownloadRequest]??void 0,hashChange:y,navigationType:e?.navigationType??("string"==typeof v?v:"replace"),userInitiated:e?.[NavigationUserInitiated]??!1,destination:p}),L=e?.[NavigationOriginalEvent],k=o[NavigationTransitionAbort].bind(o);if(L){const t=L;I.intercept=function(n){return t.preventDefault(),g(n)},I.preventDefault=function(){return t.preventDefault(),k()}}else I.intercept=g,I.preventDefault=k;I.transitionWhile=I.intercept,I.commit=b,l&&(I.reportError=l),I.scroll=noop,L&&(I.originalEvent=L);const A=new NavigationCurrentEntryChangeEvent("currententrychange",{from:a,navigationType:I.navigationType});let U=[],C=[],x=[];const R=s.map((t=>t.key));if(v===Rollback){const{entries:t}=e??{entries:void 0};if(!t)throw new InvalidStateError("Expected entries to be provided for rollback");u=t,u.forEach((t=>d.add(t)));const n=u.map((t=>t.key));C=s.filter((t=>!n.includes(t.key))),x=u.filter((t=>!R.includes(t.key)))}else if("replace"===v||"traverse"===v||"reload"===v){u[p.index]=c,"traverse"!==v&&U.push(c),"replace"===v&&(u=u.slice(0,p.index+1));const t=u.map((t=>t.key));C=s.filter((n=>!t.includes(n.key))),R.includes(c.id)&&(x=[c])}else if("push"===v){let t=!1;if(u[p.index]&&(u=u.slice(0,p.index),t=!0),u.push(c),x=[c],t){const t=u.map((t=>t.key));C=s.filter((n=>!t.includes(n.key)))}}let P;return d.add(c),(U.length||x.length||C.length)&&(P={updatedEntries:U,addedEntries:x,removedEntries:C}),T={entries:u,index:f,known:d,entriesChange:P},{entries:u,known:d,index:f,currentEntryChange:A,destination:p,navigate:I,navigationType:v,waitForCommit:w,commit:b,abortController:S}}function createEvent(t){if("undefined"!=typeof CustomEvent&&"string"==typeof t.type){if(t instanceof CustomEvent)return t;const{type:n,detail:i,...e}=t,r=new CustomEvent(n,{detail:i??e});return Object.assign(r,e),assertEvent(r,t.type),r}return t}const NavigationSetOptions=Symbol.for("@virtualstate/navigation/setOptions"),NavigationSetEntries=Symbol.for("@virtualstate/navigation/setEntries"),NavigationSetCurrentIndex=Symbol.for("@virtualstate/navigation/setCurrentIndex"),NavigationSetCurrentKey=Symbol.for("@virtualstate/navigation/setCurrentKey"),NavigationGetState=Symbol.for("@virtualstate/navigation/getState"),NavigationSetState=Symbol.for("@virtualstate/navigation/setState"),NavigationDisposeState=Symbol.for("@virtualstate/navigation/disposeState");function isNavigationNavigationType(t){return"reload"===t||"push"===t||"replace"===t||"traverse"===t}class Navigation extends NavigationEventTarget{#v=0;#u=[];#d=new Set;#h=-1;#f;#p=new WeakSet;#y="";#m=void 0;#i=void 0;get canGoBack(){return!!this.#u[this.#h-1]}get canGoForward(){return!!this.#u[this.#h+1]}get currentEntry(){return-1===this.#h?(this.#m||(this.#m=new NavigationHistoryEntry({getState:this[NavigationGetState],navigationType:"push",index:-1,sameDocument:!1,url:this.#y.toString()})),this.#m):this.#u[this.#h]}get transition(){const t=this.#f;return t?.signal.aborted?void 0:t}constructor(t={}){super(),this[NavigationSetOptions](t)}[NavigationSetOptions](t){this.#i=t,this.#y=getBaseURL(t?.baseURL),this.#u=[],t.entries&&this[NavigationSetEntries](t.entries),t.currentKey?this[NavigationSetCurrentKey](t.currentKey):"number"==typeof t.currentIndex&&this[NavigationSetCurrentIndex](t.currentIndex)}[NavigationSetCurrentKey](t){const n=this.#u.findIndex((n=>n.key===t));-1!==n&&(this.#h=n)}[NavigationSetCurrentIndex](t){t<=-1||t>=this.#u.length||(this.#h=t)}[NavigationSetEntries](t){this.#u=t.map((({key:t,url:n,navigationType:i,state:e,sameDocument:r},a)=>new NavigationHistoryEntry({getState:this[NavigationGetState],navigationType:isNavigationNavigationType(i)?i:"push",sameDocument:r??!0,index:a,url:n,key:t,state:e}))),-1===this.#h&&this.#u.length&&(this.#h=0)}[NavigationGetState]=t=>this.#i?.getState?.(t)??void 0;[NavigationSetState]=t=>this.#i?.setState?.(t);[NavigationDisposeState]=t=>this.#i?.disposeState?.(t);back(t){if(!this.canGoBack)throw new InvalidStateError("Cannot go back");const n=this.#u[this.#h-1];return this.#E("traverse",this.#T(n,{...t,navigationType:"traverse"}))}entries(){return[...this.#u]}forward(t){if(!this.canGoForward)throw new InvalidStateError;const n=this.#u[this.#h+1];return this.#E("traverse",this.#T(n,{...t,navigationType:"traverse"}))}goTo(t,n){return this.traverseTo(t,n)}traverseTo(t,n){const i=this.#u.find((n=>n.key===t));if(i)return this.#E("traverse",this.#T(i,{...n,navigationType:"traverse"}));throw new InvalidStateError}#N=t=>{const n=this.currentEntry?.url;return!n||(i=new URL(n),e=new URL(t),i.origin===e.origin);var i,e};navigate(t,n){let i=this.#y;this.currentEntry?.url&&(i=this.currentEntry?.url);const e=new URL(t,i).toString();let r="push";"push"!==n?.history&&"replace"!==n?.history||(r=n?.history);const a=this.#w({getState:this[NavigationGetState],url:e,...n,sameDocument:this.#N(e),navigationType:r});return this.#E(r,a,void 0,n)}#T=(t,n)=>this.#w({...t,getState:this[NavigationGetState],index:t?.index??void 0,state:n?.state??t?.getState(),navigationType:t?.[NavigationHistoryEntryNavigationType]??("string"==typeof n?.navigationType?n.navigationType:"replace"),...n,get[NavigationHistoryEntryKnownAs](){return t?.[NavigationHistoryEntryKnownAs]},get[EventTargetListeners$1](){return t?.[EventTargetListeners$1]}});#w=t=>{const n=new NavigationHistoryEntry({...t,index:t.index??(()=>this.#u.indexOf(n))});return n};#E=(t,n,i,e)=>{if(n===this.currentEntry)throw new InvalidStateError;if(this.#u.findIndex((t=>t.id===n.id))>-1)throw new InvalidStateError;return this.#b(t,n,i,e)};#b=(t,n,i,e)=>{const r=i??new NavigationTransition({from:n,navigationType:"string"==typeof t?t:"replace",rollback:t=>this.#S(r,t),[NavigationTransitionNavigationType]:t,[NavigationTransitionInitialEntries]:[...this.#u],[NavigationTransitionInitialIndex]:this.#h,[NavigationTransitionKnown]:[...this.#d],[NavigationTransitionEntry]:n,[NavigationTransitionParentEventTarget]:this}),{finished:a,committed:o}=r;return this.#I(r),(()=>this.#L(t,n,r,e))().catch((t=>{})),{committed:o,finished:a}};#I=t=>{this.#p.add(t)};#L=(t,n,i,e)=>{try{return this.#v+=1,this.#k(t,n,i,e)}finally{this.#v-=1}};#S=(t,n)=>{const i=t[NavigationTransitionInitialEntries],e=t[NavigationTransitionInitialIndex],r=i[e],a=r?this.#T(r,n):void 0,o={...n,index:e,known:new Set([...this.#d,...i]),navigationType:a?.[NavigationHistoryEntryNavigationType]??"replace",entries:i},s=a?Rollback:Unset,c=a??this.#w({getState:this[NavigationGetState],navigationType:"replace",index:o.index,sameDocument:!0,...n});return this.#E(s,c,void 0,o)};#k=(t,n,i,e)=>{let r=t;const a=getPerformance();a&&n.sameDocument&&"string"==typeof r&&a?.mark?.(`same-document-navigation:${n.id}`);let o=!1,s=!1;const{currentEntry:c}=this;this.#f?.finished?.catch((t=>t)),this.#f?.[NavigationTransitionFinishedDeferred]?.promise?.catch((t=>t)),this.#f?.[NavigationTransitionCommittedDeferred]?.promise?.catch((t=>t)),this.#f?.[NavigationTransitionAbort](),this.#f=i;const g=i.dispatchEvent({type:NavigationTransitionStart,transition:i,entry:n}),l=({entries:t,index:n,known:e})=>{i.signal.aborted||(this.#u=t,e&&(this.#d=new Set([...this.#d,...e])),this.#h=n,this[NavigationSetState](this.currentEntry))},v=async t=>{if(s)return;s=!0,l(t);const{entriesChange:e}=t,r=[i.dispatchEvent(createEvent({type:NavigationTransitionCommit,transition:i,entry:n}))];e&&r.push(this.dispatchEvent(createEvent({type:"entrieschange",...e}))),await Promise.all(r)},u=async()=>{if(await g,"number"!=typeof e?.index||!e.entries)throw new InvalidStateError;const t=this.entries(),i=t.map((t=>t.key)),r=e.entries.map((t=>t.key)),a=t.filter((t=>!r.includes(t.key))),s=e.entries.filter((t=>!i.includes(t.key)));return await v({entries:e.entries,index:e.index,known:e.known,entriesChange:a.length||s.length?{removedEntries:a,addedEntries:s,updatedEntries:[]}:void 0}),await this.dispatchEvent(createEvent({type:"currententrychange"})),o=!0,n},d=()=>{if(t===Unset)return u();const a=createNavigationTransition({currentEntry:c,currentIndex:this.#h,options:e,transition:i,known:this.#d,commit:v,reportError:i[NavigationTransitionRejected]}),s=new Promise(queueMicrotask);let g=[];const l=function*(t){const e=new Promise(queueMicrotask),{currentEntryChange:a,navigate:s,waitForCommit:g,commit:l,abortController:v}=t,u=v.abort.bind(v);if(i.signal.addEventListener("abort",u,{once:!0}),"string"==typeof r||r===Rollback){const t=c?.dispatchEvent(createEvent({type:"navigatefrom",intercept:i[NavigationIntercept],transitionWhile:i[NavigationIntercept]}));t&&(yield t)}"string"==typeof r&&(yield i.dispatchEvent(s));i[NavigationTransitionCommitIsManual]||l();yield g,n.sameDocument&&(yield i.dispatchEvent(a));o=!0,"string"==typeof r&&(yield n.dispatchEvent(createEvent({type:"navigateto",intercept:i[NavigationIntercept],transitionWhile:i[NavigationIntercept]})));yield h(),i[NavigationTransitionPromises].size||(yield e);yield i.dispatchEvent({type:NavigationTransitionStartDeadline,transition:i,entry:n}),yield i[NavigationTransitionWait](),i.signal.removeEventListener("abort",u),yield i[NavigationTransitionFinish](),"string"==typeof r&&(yield i.dispatchEvent(createEvent({type:"finish",intercept:i[NavigationIntercept],transitionWhile:i[NavigationIntercept]})),yield i.dispatchEvent(createEvent({type:"navigatesuccess",intercept:i[NavigationIntercept],transitionWhile:i[NavigationIntercept]})))}(a)[Symbol.iterator](),d={[Symbol.iterator]:()=>({next:()=>l.next()})};async function f(){const t=[...g];if(t.length){g=[];const n=(await Promise.all(t)).filter(isPromiseRejectedResult);if(1===n.length)throw await Promise.reject(n[0]);if(n.length)throw new AggregateError(n,n[0].reason?.message)}else i[NavigationTransitionIsOngoing]||await s}return async function t(){for(const n of d){if(isPromise(n)&&g.push(Promise.allSettled([n]).then((([t])=>t))),i[NavigationTransitionCommitIsManual]||o&&i[NavigationTransitionIsAsync])return f().then(t);if(i.signal.aborted)break}if(g.length)return f()}().then((()=>i[NavigationTransitionIsOngoing]?void 0:s)).then((()=>n))},h=async()=>this.#A();return Promise.allSettled([(()=>{try{return d()}catch(t){return Promise.reject(t)}})()]).then((async([t])=>{"rejected"===t.status&&await i.dispatchEvent({type:NavigationTransitionError,error:t.reason,transition:i,entry:n}),await h(),await i.dispatchEvent({type:NavigationTransitionFinally,transition:i,entry:n}),await i[NavigationTransitionWait](),this.#f===i&&(this.#f=void 0),n.sameDocument&&"string"==typeof r&&(a.mark(`same-document-navigation-finish:${n.id}`),a.measure(`same-document-navigation:${n.url}`,`same-document-navigation:${n.id}`,`same-document-navigation-finish:${n.id}`))})).then((()=>n))};#A=async()=>{for(const t of this.#d){if(-1!==this.#u.findIndex((n=>n.key===t.key)))continue;this.#d.delete(t);const n=createEvent({type:"dispose",entry:t});this[NavigationDisposeState](t),await t.dispatchEvent(n),await this.dispatchEvent(n)}};reload(t){const{currentEntry:n}=this;if(!n)throw new InvalidStateError;const i=this.#T(n,t);return this.#E("reload",i,void 0,t)}updateCurrentEntry(t){const{currentEntry:n}=this;if(!n)throw new InvalidStateError("Expected current entry");n[NavigationHistoryEntrySetState](t.state),this[NavigationSetState](n);const i=new NavigationCurrentEntryChangeEvent("currententrychange",{from:n,navigationType:void 0}),e=createEvent({type:"entrieschange",addedEntries:[],removedEntries:[],updatedEntries:[n]});return Promise.all([this.dispatchEvent(i),this.dispatchEvent(e)])}}function getPerformance(){return"undefined"!=typeof performance?performance:{now:()=>Date.now(),mark(){},measure(){}}}let navigation$1;function getNavigation(){return globalNavigation||(navigation$1||(navigation$1=new Navigation))}const getStructuredClone=()=>json;async function getStructuredCloneModule(){const{stringify:t,parse:n}=await Promise.resolve().then((function(){return json}));return{stringify:t,parse:n}}function structuredCloneFallback(){return{stringify:JSON.stringify.bind(JSON),parse:JSON.parse.bind(JSON)}}function stringify$2(t){return getStructuredClone().stringify(t)}function parse$2(t){return getStructuredClone().parse(t)}const AppLocationCheckChange=Symbol.for("@virtualstate/navigation/location/checkChange"),AppLocationAwaitFinished=Symbol.for("@virtualstate/navigation/location/awaitFinished"),AppLocationTransitionURL=Symbol.for("@virtualstate/navigation/location/transitionURL"),AppLocationUrl=Symbol.for("@virtualstate/navigation/location/url"),NAVIGATION_LOCATION_DEFAULT_URL="https://html.spec.whatwg.org/";class NavigationLocation{#i;#U;constructor(t){this.#i=t,this.#U=t.navigation;const n=()=>{this.#C=void 0,this.#y=void 0};this.#U.addEventListener("navigate",(()=>{const t=this.#U.transition;t&&function(t){return NavigationTransitionCommittedDeferred in t}(t)&&t[NavigationTransitionCommittedDeferred].promise.then(n,n)})),this.#U.addEventListener("currententrychange",n)}#x=new WeakMap;#C;#y;get[AppLocationUrl](){if(this.#C)return this.#C;const{currentEntry:t}=this.#U;if(!t)return this.#y=getBaseURL(this.#i.baseURL),this.#y;const n=this.#x.get(t);if(n)return n;const i=new URL(t.url??"https://html.spec.whatwg.org/");return this.#x.set(t,i),i}get hash(){return this[AppLocationUrl].hash}set hash(t){this.#R("hash",t)}get host(){return this[AppLocationUrl].host}set host(t){this.#R("host",t)}get hostname(){return this[AppLocationUrl].hostname}set hostname(t){this.#R("hostname",t)}get href(){return this[AppLocationUrl].href}set href(t){this.#R("href",t)}get origin(){return this[AppLocationUrl].origin}get pathname(){return this[AppLocationUrl].pathname}set pathname(t){this.#R("pathname",t)}get port(){return this[AppLocationUrl].port}set port(t){this.#R("port",t)}get protocol(){return this[AppLocationUrl].protocol}set protocol(t){this.#R("protocol",t)}get search(){return this[AppLocationUrl].search}set search(t){this.#R("search",t)}#R=(t,n)=>{const i=this[AppLocationUrl].toString();let e;"href"===t?e=new URL(n,i):(e=new URL(i),e[t]=n);const r=e.toString();i!==r&&this.#P(e,(()=>this.#U.navigate(r)))};replace(t){return this.#P(t,(t=>this.#U.navigate(t.toString(),{history:"replace"})))}reload(){return this.#D(this.#U.reload())}assign(t){return this.#P(t,(t=>this.#U.navigate(t.toString())))}[AppLocationTransitionURL](t,n){return this.#P(t,n)}#P=async(t,n)=>{const i=this.#C="string"==typeof t?new URL(t,this[AppLocationUrl].toString()):t;try{await this.#D(n(i))}finally{this.#C===i&&(this.#C=void 0)}};[AppLocationAwaitFinished](t){return this.#D(t)}#D=async t=>{if(this.#y=void 0,!t)return;const{committed:n,finished:i}=t;await Promise.all([n||Promise.resolve(void 0),i||Promise.resolve(void 0)])};#O=()=>{const t=this[AppLocationUrl],n=t.toString(),i=this.#U.currentEntry?.url;if(n!==i)return this.#P(t,(()=>this.#U.navigate(n)))};[AppLocationCheckChange](){return this.#O()}}const State=Symbol.for("@virtualstate/navigation/history/state");class NavigationHistory extends NavigationLocation{#i;#U;constructor(t){super(t),this.#i=t,this.#U=t.navigation}get length(){return this.#U.entries().length}scrollRestoration="manual";get state(){const t=this.#U.currentEntry?.getState();return"string"==typeof t||"number"==typeof t||"boolean"==typeof t?t:this.#i[State]??void 0}back(){const t=this.#U.entries()[(this.#U.currentEntry?.index??-1)-1],n=t?.url;if(!n)throw new InvalidStateError("Cannot go back");return this[AppLocationTransitionURL](n,(()=>this.#U.back()))}forward(){const t=this.#U.entries()[(this.#U.currentEntry?.index??-1)+1],n=t?.url;if(!n)throw new InvalidStateError("Cannot go forward");return this[AppLocationTransitionURL](n,(()=>this.#U.forward()))}go(t){if("number"!=typeof t||0===t||isNaN(t))return this[AppLocationAwaitFinished](this.#U.reload());const n=this.#U.entries(),{currentEntry:i}=this.#U;if(!i)throw new Error(`Could not go ${t}`);const e=n[i.index+t];if(!e)throw new Error(`Could not go ${t}`);const r=e.key;return this[AppLocationAwaitFinished](this.#U.traverseTo(r))}replaceState(t,n,i){return i?this[AppLocationTransitionURL](i,(n=>this.#U.navigate(n.toString(),{state:t,history:"replace"}))):this.#U.updateCurrentEntry({state:t})}pushState(t,n,i){return i?this[AppLocationTransitionURL](i,(n=>this.#U.navigate(n.toString(),{state:t}))):this.#U.updateCurrentEntry({state:t})}}const globalWindow="undefined"==typeof window?void 0:window,globalSelf="undefined"==typeof self?void 0:self,NavigationKey="__@virtualstate/navigation/key",NavigationMeta="__@virtualstate/navigation/meta";function getWindowHistory(t=globalWindow){if(void 0!==t)return t.history}function isStateHistoryMeta(t){return like(t)&&!0===t[NavigationMeta]}function isStateHistoryWithMeta(t){return like(t)&&isStateHistoryMeta(t[NavigationKey])}function disposeHistoryState(t,n){n&&"undefined"!=typeof sessionStorage&&sessionStorage.removeItem(t.key)}function getEntries(t,n=DEFAULT_POLYFILL_OPTIONS.limit){let i=t.entries();return"number"==typeof n&&(i=i.slice(-n)),i.map((({id:t,key:n,url:i,sameDocument:e})=>({id:t,key:n,url:i,sameDocument:e})))}function getNavigationEntryMeta(t,n,i=DEFAULT_POLYFILL_OPTIONS.limit){return{[NavigationMeta]:!0,currentIndex:n.index,key:n.key,entries:getEntries(t,i),state:n.getState()}}function getNavigationEntryWithMeta(t,n,i=DEFAULT_POLYFILL_OPTIONS.limit){return{[NavigationKey]:getNavigationEntryMeta(t,n,i)}}function setHistoryState(t,n,i,e,r){!function(){if("undefined"==typeof sessionStorage)return;try{const n=stringify$2(getNavigationEntryWithMeta(t,i,r));sessionStorage.setItem(i.key,n)}catch{}}()}function getHistoryState(t,n){return function(){const i=function(){const n=t.originalState??function(){try{return t.state}catch{return}}();return like(n)?n:void 0}();return isStateHistoryWithMeta(i)?i[NavigationKey].key!==n.key?void 0:i[NavigationKey].state:void 0}()??function(){if("undefined"==typeof sessionStorage)return;try{const t=sessionStorage.getItem(n.key);if(!t)return;const i=parse$2(t);if(!isStateHistoryWithMeta(i))return;return i[NavigationKey].state}catch{return}}()}const DEFAULT_POLYFILL_OPTIONS=Object.freeze({persist:!0,persistState:!0,history:!0,limit:50,patch:!0,interceptEvents:!0});function isNavigationPolyfill(t){return like(t)&&"function"==typeof t[NavigationSetEntries]&&"function"==typeof t[NavigationSetCurrentKey]}function getNavigationOnlyPolyfill(t){const n=[{key:v4$2()}],i=t??new Navigation({entries:n}),e=new NavigationHistory({navigation:i});return{navigation:i,history:e,apply(){isNavigationPolyfill(t)&&!i.entries().length&&t[NavigationSetEntries](n)}}}function interceptWindowClicks(t,n){n.addEventListener("click",(i=>{if(i.target?.ownerDocument===n.document){const n=getAnchorFromEvent(i);like(n)&&function(n,i){!function(){if(!isAppNavigation(n))return;ok(n);const e={history:"auto",[NavigationUserInitiated]:!0,[NavigationDownloadRequest]:i.download,[NavigationOriginalEvent]:n};t.navigate(i.href,e)}()}(i,n)}})),n.addEventListener("submit",(i=>{if(i.target?.ownerDocument===n.document){const n=getFormFromEvent(i);like(n)&&function(n,i){!function(){if(n.defaultPrevented)return;const e=n.submitter&&"formMethod"in n.submitter&&n.submitter.formMethod?n.submitter.formMethod:i.method;if("dialog"===e)return;const r=n.submitter&&"formAction"in n.submitter&&n.submitter.formAction?n.submitter.formAction:i.action;let a;try{a=new FormData(i)}catch{a=new FormData(void 0)}const o="get"===e?new URLSearchParams([...a].map((([t,n])=>n instanceof File?[t,n.name]:[t,n]))):void 0,s="post"===e?a:void 0,c=new URL(r,t.currentEntry.url);o&&(c.search=o.toString());const g=n;ok(g);const l={history:"auto",[NavigationUserInitiated]:!0,[NavigationFormData]:s,[NavigationOriginalEvent]:g};t.navigate(c.href,l)}()}(i,n)}}))}function getAnchorFromEvent(t){return matchesAncestor(getComposedPathTarget(t),"a[href]:not([data-navigation-ignore])")}function getFormFromEvent(t){return matchesAncestor(getComposedPathTarget(t),"form:not([data-navigation-ignore])")}function getComposedPathTarget(t){if(!t.composedPath)return t.target;return t.composedPath()[0]??t.target}function patchGlobalScope(t,n,i){!function(){if(function(t){try{Object.defineProperty(t,"navigation",{value:i})}catch(t){}if(!t.history)try{Object.defineProperty(t,"history",{value:n})}catch(t){}}(t),t!==globalWindow)return;if(globalSelf)try{Object.defineProperty(globalSelf,"navigation",{value:i})}catch(t){}if("undefined"!=typeof globalThis)try{Object.defineProperty(globalThis,"navigation",{value:i})}catch(t){}}(),function(){if(!t.PopStateEvent)return;const n=t.PopStateEvent.prototype;if(!n)return;const i=Object.getOwnPropertyDescriptor(n,"state");Object.defineProperty(n,"state",{...i,get(){const t=i.get.call(this);return isStateHistoryWithMeta(t)?t[NavigationKey].state:t}}),Object.defineProperty(n,"originalState",{...i})}(),function(){if(n instanceof NavigationHistory)return;const t=new NavigationHistory({navigation:i}),e=t.pushState.bind(t),r=t.replaceState.bind(t),a=t.go.bind(t),o=t.back.bind(t),s=t.forward.bind(t),c=Object.getPrototypeOf(n),g={pushState:{...Object.getOwnPropertyDescriptor(c,"pushState"),value:e},replaceState:{...Object.getOwnPropertyDescriptor(c,"replaceState"),value:r},go:{...Object.getOwnPropertyDescriptor(c,"go"),value:a},back:{...Object.getOwnPropertyDescriptor(c,"back"),value:o},forward:{...Object.getOwnPropertyDescriptor(c,"forward"),value:s}};Object.defineProperties(c,g);const l=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(n),"state");Object.defineProperty(n,"state",{...l,get:()=>t.state}),Object.defineProperty(n,"originalState",{...l})}()}function getCompletePolyfill(t=DEFAULT_POLYFILL_OPTIONS){const{persist:n,persistState:i,history:e,limit:r,patch:a,interceptEvents:o,window:s=globalWindow,navigation:c}={...DEFAULT_POLYFILL_OPTIONS,...t},g=n||i,l=s??globalWindow,v=t.history&&"boolean"!=typeof t.history?t.history:getWindowHistory(l);if(!v)return getNavigationOnlyPolyfill();ok(l,"window required when using polyfill with history, this shouldn't be seen");const u=v?.state;let d={[NavigationMeta]:!0,currentIndex:-1,entries:[],key:"",state:void 0};isStateHistoryWithMeta(u)&&(d=u[NavigationKey]);let h=d.entries;const f=!(!s&&!e||!v);if(!h.length){let t,n;l.location?.href&&(t=l.location.href),isStateHistoryWithMeta(u)||isStateHistoryMeta(u)||(n=u);const i=v4$2();h=[{key:i,state:n,url:t}],d.key=i,d.currentIndex=0}const p={entries:h,currentIndex:d?.currentIndex,currentKey:d?.key,getState(t){if(f)return getHistoryState(v,t)},setState(t){f&&t.sameDocument&&setHistoryState(y,v,t,g,r)},disposeState(t){f&&disposeHistoryState(t,g)}},y=c??new Navigation(p),m=v?.pushState.bind(v),E=v?.replaceState.bind(v),T=v?.go.bind(v);return{navigation:y,history:v,apply(){if(isNavigationPolyfill(y)&&y[NavigationSetOptions](p),f){const t=new Set,e=new Set;y.addEventListener("navigate",(t=>{t.destination.sameDocument||t.intercept({commit:"after-transition",async handler(){queueMicrotask((()=>{t.signal.aborted||function(){if(like(t.originalEvent)){const n=getAnchorFromEvent(t.originalEvent);if(n)return function(t){const n=t.cloneNode();n.setAttribute("data-navigation-ignore","1"),n.click()}(n);{const n=getFormFromEvent(t.originalEvent);if(n)return function(t){const n=t.cloneNode();n.setAttribute("data-navigation-ignore","1"),n.submit()}(n)}}location.href=t.destination.url}()}))}})})),y.addEventListener("currententrychange",(({navigationType:n,from:i})=>{const{currentEntry:a}=y;if(!a)return;const{key:o,url:s}=a;if(e.delete(o)||!a?.sameDocument)return;const c=getNavigationEntryWithMeta(y,a,r);switch(n||"replace"){case"push":return m(c,"",s);case"replace":return E(c,"",s);case"traverse":const n=a.index-i.index;return t.add(o),T(n)}})),l.addEventListener("popstate",(a=>{const{state:o,originalState:s}=a,c=s??o;if(!isStateHistoryWithMeta(c))return;const{[NavigationKey]:{key:g}}=c;if(t.delete(g))return;let l;e.add(g);try{l=y.traverseTo(g).committed}catch(t){if(t instanceof InvalidStateError&&!n)return;throw t}(n||i)&&l.then((t=>{const n=getNavigationEntryWithMeta(y,t,r);E(n,"",t.url)})).catch((()=>{}))}))}if(o&&interceptWindowClicks(y,l),a&&patchGlobalScope(l,v,y),!v.state){const t=getNavigationEntryWithMeta(y,y.currentEntry,r);E(t,"",y.currentEntry.url)}}}}function isAppNavigation(t){return!(0!==t.button||t.defaultPrevented||t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function matchesAncestor(t,n){let i=t?t.matches instanceof Function?t:t.parentElement:void 0;for(;i;){if(i.matches(n))return ok(i),i;i=i.parentElement}return}function applyPolyfill(t=DEFAULT_POLYFILL_OPTIONS){const{apply:n,navigation:i}=getCompletePolyfill(t);return n(),i}function shouldApplyPolyfill(t=getNavigation()){return t!==globalNavigation&&!globalNavigation&&"undefined"!=typeof window}const navigation=getNavigation();if(shouldApplyPolyfill(navigation))try{applyPolyfill({navigation:navigation})}catch(t){console.error("Failed to apply polyfill"),console.error(t)}const GlobalUUID=isRandomUUID(crypto)?(t=>()=>t.randomUUID())(crypto):void 0;function isRandomUUID(t){return function(t){return void 0!==t}(t)&&"function"==typeof t.randomUUID}const v4$1=GlobalUUID;var getRandomValues,importUuid=Object.freeze({__proto__:null,v4:v4$1}),rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&!(getRandomValues="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}var REGEX=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function validate(t){return"string"==typeof t&&REGEX.test(t)}for(var _nodeId,_clockseq,byteToHex=[],i=0;i<256;++i)byteToHex.push((i+256).toString(16).substr(1));function stringify$1(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=(byteToHex[t[n+0]]+byteToHex[t[n+1]]+byteToHex[t[n+2]]+byteToHex[t[n+3]]+"-"+byteToHex[t[n+4]]+byteToHex[t[n+5]]+"-"+byteToHex[t[n+6]]+byteToHex[t[n+7]]+"-"+byteToHex[t[n+8]]+byteToHex[t[n+9]]+"-"+byteToHex[t[n+10]]+byteToHex[t[n+11]]+byteToHex[t[n+12]]+byteToHex[t[n+13]]+byteToHex[t[n+14]]+byteToHex[t[n+15]]).toLowerCase();if(!validate(i))throw TypeError("Stringified UUID is invalid");return i}var _lastMSecs=0,_lastNSecs=0;function v1(t,n,i){var e=n&&i||0,r=n||new Array(16),a=(t=t||{}).node||_nodeId,o=void 0!==t.clockseq?t.clockseq:_clockseq;if(null==a||null==o){var s=t.random||(t.rng||rng)();null==a&&(a=_nodeId=[1|s[0],s[1],s[2],s[3],s[4],s[5]]),null==o&&(o=_clockseq=16383&(s[6]<<8|s[7]))}var c=void 0!==t.msecs?t.msecs:Date.now(),g=void 0!==t.nsecs?t.nsecs:_lastNSecs+1,l=c-_lastMSecs+(g-_lastNSecs)/1e4;if(l<0&&void 0===t.clockseq&&(o=o+1&16383),(l<0||c>_lastMSecs)&&void 0===t.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");_lastMSecs=c,_lastNSecs=g,_clockseq=o;var v=(1e4*(268435455&(c+=122192928e5))+g)%4294967296;r[e++]=v>>>24&255,r[e++]=v>>>16&255,r[e++]=v>>>8&255,r[e++]=255&v;var u=c/4294967296*1e4&268435455;r[e++]=u>>>8&255,r[e++]=255&u,r[e++]=u>>>24&15|16,r[e++]=u>>>16&255,r[e++]=o>>>8|128,r[e++]=255&o;for(var d=0;d<6;++d)r[e+d]=a[d];return n||stringify$1(r)}function parse$1(t){if(!validate(t))throw TypeError("Invalid UUID");var n,i=new Uint8Array(16);return i[0]=(n=parseInt(t.slice(0,8),16))>>>24,i[1]=n>>>16&255,i[2]=n>>>8&255,i[3]=255&n,i[4]=(n=parseInt(t.slice(9,13),16))>>>8,i[5]=255&n,i[6]=(n=parseInt(t.slice(14,18),16))>>>8,i[7]=255&n,i[8]=(n=parseInt(t.slice(19,23),16))>>>8,i[9]=255&n,i[10]=(n=parseInt(t.slice(24,36),16))/1099511627776&255,i[11]=n/4294967296&255,i[12]=n>>>24&255,i[13]=n>>>16&255,i[14]=n>>>8&255,i[15]=255&n,i}function stringToBytes(t){t=unescape(encodeURIComponent(t));for(var n=[],i=0;i<t.length;++i)n.push(t.charCodeAt(i));return n}var DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",URL$1="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function v35(t,n,i){function e(t,e,r,a){if("string"==typeof t&&(t=stringToBytes(t)),"string"==typeof e&&(e=parse$1(e)),16!==e.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var o=new Uint8Array(16+t.length);if(o.set(e),o.set(t,e.length),(o=i(o))[6]=15&o[6]|n,o[8]=63&o[8]|128,r){a=a||0;for(var s=0;s<16;++s)r[a+s]=o[s];return r}return stringify$1(o)}try{e.name=t}catch(t){}return e.DNS=DNS,e.URL=URL$1,e}function md5(t){if("string"==typeof t){var n=unescape(encodeURIComponent(t));t=new Uint8Array(n.length);for(var i=0;i<n.length;++i)t[i]=n.charCodeAt(i)}return md5ToHexEncodedArray(wordsToMd5(bytesToWords(t),8*t.length))}function md5ToHexEncodedArray(t){for(var n=[],i=32*t.length,e="0123456789abcdef",r=0;r<i;r+=8){var a=t[r>>5]>>>r%32&255,o=parseInt(e.charAt(a>>>4&15)+e.charAt(15&a),16);n.push(o)}return n}function getOutputLength(t){return 14+(t+64>>>9<<4)+1}function wordsToMd5(t,n){t[n>>5]|=128<<n%32,t[getOutputLength(n)-1]=n;for(var i=1732584193,e=-271733879,r=-1732584194,a=271733878,o=0;o<t.length;o+=16){var s=i,c=e,g=r,l=a;i=md5ff(i,e,r,a,t[o],7,-680876936),a=md5ff(a,i,e,r,t[o+1],12,-389564586),r=md5ff(r,a,i,e,t[o+2],17,606105819),e=md5ff(e,r,a,i,t[o+3],22,-1044525330),i=md5ff(i,e,r,a,t[o+4],7,-176418897),a=md5ff(a,i,e,r,t[o+5],12,1200080426),r=md5ff(r,a,i,e,t[o+6],17,-1473231341),e=md5ff(e,r,a,i,t[o+7],22,-45705983),i=md5ff(i,e,r,a,t[o+8],7,1770035416),a=md5ff(a,i,e,r,t[o+9],12,-1958414417),r=md5ff(r,a,i,e,t[o+10],17,-42063),e=md5ff(e,r,a,i,t[o+11],22,-1990404162),i=md5ff(i,e,r,a,t[o+12],7,1804603682),a=md5ff(a,i,e,r,t[o+13],12,-40341101),r=md5ff(r,a,i,e,t[o+14],17,-1502002290),i=md5gg(i,e=md5ff(e,r,a,i,t[o+15],22,1236535329),r,a,t[o+1],5,-165796510),a=md5gg(a,i,e,r,t[o+6],9,-1069501632),r=md5gg(r,a,i,e,t[o+11],14,643717713),e=md5gg(e,r,a,i,t[o],20,-373897302),i=md5gg(i,e,r,a,t[o+5],5,-701558691),a=md5gg(a,i,e,r,t[o+10],9,38016083),r=md5gg(r,a,i,e,t[o+15],14,-660478335),e=md5gg(e,r,a,i,t[o+4],20,-405537848),i=md5gg(i,e,r,a,t[o+9],5,568446438),a=md5gg(a,i,e,r,t[o+14],9,-1019803690),r=md5gg(r,a,i,e,t[o+3],14,-187363961),e=md5gg(e,r,a,i,t[o+8],20,1163531501),i=md5gg(i,e,r,a,t[o+13],5,-1444681467),a=md5gg(a,i,e,r,t[o+2],9,-51403784),r=md5gg(r,a,i,e,t[o+7],14,1735328473),i=md5hh(i,e=md5gg(e,r,a,i,t[o+12],20,-1926607734),r,a,t[o+5],4,-378558),a=md5hh(a,i,e,r,t[o+8],11,-2022574463),r=md5hh(r,a,i,e,t[o+11],16,1839030562),e=md5hh(e,r,a,i,t[o+14],23,-35309556),i=md5hh(i,e,r,a,t[o+1],4,-1530992060),a=md5hh(a,i,e,r,t[o+4],11,1272893353),r=md5hh(r,a,i,e,t[o+7],16,-155497632),e=md5hh(e,r,a,i,t[o+10],23,-1094730640),i=md5hh(i,e,r,a,t[o+13],4,681279174),a=md5hh(a,i,e,r,t[o],11,-358537222),r=md5hh(r,a,i,e,t[o+3],16,-722521979),e=md5hh(e,r,a,i,t[o+6],23,76029189),i=md5hh(i,e,r,a,t[o+9],4,-640364487),a=md5hh(a,i,e,r,t[o+12],11,-421815835),r=md5hh(r,a,i,e,t[o+15],16,530742520),i=md5ii(i,e=md5hh(e,r,a,i,t[o+2],23,-995338651),r,a,t[o],6,-198630844),a=md5ii(a,i,e,r,t[o+7],10,1126891415),r=md5ii(r,a,i,e,t[o+14],15,-1416354905),e=md5ii(e,r,a,i,t[o+5],21,-57434055),i=md5ii(i,e,r,a,t[o+12],6,1700485571),a=md5ii(a,i,e,r,t[o+3],10,-1894986606),r=md5ii(r,a,i,e,t[o+10],15,-1051523),e=md5ii(e,r,a,i,t[o+1],21,-2054922799),i=md5ii(i,e,r,a,t[o+8],6,1873313359),a=md5ii(a,i,e,r,t[o+15],10,-30611744),r=md5ii(r,a,i,e,t[o+6],15,-1560198380),e=md5ii(e,r,a,i,t[o+13],21,1309151649),i=md5ii(i,e,r,a,t[o+4],6,-145523070),a=md5ii(a,i,e,r,t[o+11],10,-1120210379),r=md5ii(r,a,i,e,t[o+2],15,718787259),e=md5ii(e,r,a,i,t[o+9],21,-343485551),i=safeAdd(i,s),e=safeAdd(e,c),r=safeAdd(r,g),a=safeAdd(a,l)}return[i,e,r,a]}function bytesToWords(t){if(0===t.length)return[];for(var n=8*t.length,i=new Uint32Array(getOutputLength(n)),e=0;e<n;e+=8)i[e>>5]|=(255&t[e/8])<<e%32;return i}function safeAdd(t,n){var i=(65535&t)+(65535&n);return(t>>16)+(n>>16)+(i>>16)<<16|65535&i}function bitRotateLeft(t,n){return t<<n|t>>>32-n}function md5cmn(t,n,i,e,r,a){return safeAdd(bitRotateLeft(safeAdd(safeAdd(n,t),safeAdd(e,a)),r),i)}function md5ff(t,n,i,e,r,a,o){return md5cmn(n&i|~n&e,t,n,r,a,o)}function md5gg(t,n,i,e,r,a,o){return md5cmn(n&e|i&~e,t,n,r,a,o)}function md5hh(t,n,i,e,r,a,o){return md5cmn(n^i^e,t,n,r,a,o)}function md5ii(t,n,i,e,r,a,o){return md5cmn(i^(n|~e),t,n,r,a,o)}var v3=v35("v3",48,md5),v3$1=v3;function v4(t,n,i){var e=(t=t||{}).random||(t.rng||rng)();if(e[6]=15&e[6]|64,e[8]=63&e[8]|128,n){i=i||0;for(var r=0;r<16;++r)n[i+r]=e[r];return n}return stringify$1(e)}function f(t,n,i,e){switch(t){case 0:return n&i^~n&e;case 1:case 3:return n^i^e;case 2:return n&i^n&e^i&e}}function ROTL(t,n){return t<<n|t>>>32-n}function sha1(t){var n=[1518500249,1859775393,2400959708,3395469782],i=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof t){var e=unescape(encodeURIComponent(t));t=[];for(var r=0;r<e.length;++r)t.push(e.charCodeAt(r))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var a=t.length/4+2,o=Math.ceil(a/16),s=new Array(o),c=0;c<o;++c){for(var g=new Uint32Array(16),l=0;l<16;++l)g[l]=t[64*c+4*l]<<24|t[64*c+4*l+1]<<16|t[64*c+4*l+2]<<8|t[64*c+4*l+3];s[c]=g}s[o-1][14]=8*(t.length-1)/Math.pow(2,32),s[o-1][14]=Math.floor(s[o-1][14]),s[o-1][15]=8*(t.length-1)&4294967295;for(var v=0;v<o;++v){for(var u=new Uint32Array(80),d=0;d<16;++d)u[d]=s[v][d];for(var h=16;h<80;++h)u[h]=ROTL(u[h-3]^u[h-8]^u[h-14]^u[h-16],1);for(var p=i[0],y=i[1],m=i[2],E=i[3],T=i[4],N=0;N<80;++N){var w=Math.floor(N/20),b=ROTL(p,5)+f(w,y,m,E)+T+n[w]+u[N]>>>0;T=E,E=m,m=ROTL(y,30)>>>0,y=p,p=b}i[0]=i[0]+p>>>0,i[1]=i[1]+y>>>0,i[2]=i[2]+m>>>0,i[3]=i[3]+E>>>0,i[4]=i[4]+T>>>0}return[i[0]>>24&255,i[0]>>16&255,i[0]>>8&255,255&i[0],i[1]>>24&255,i[1]>>16&255,i[1]>>8&255,255&i[1],i[2]>>24&255,i[2]>>16&255,i[2]>>8&255,255&i[2],i[3]>>24&255,i[3]>>16&255,i[3]>>8&255,255&i[3],i[4]>>24&255,i[4]>>16&255,i[4]>>8&255,255&i[4]]}var v5=v35("v5",80,sha1),v5$1=v5,nil="00000000-0000-0000-0000-000000000000";function version(t){if(!validate(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}var index=Object.freeze({__proto__:null,v1:v1,v3:v3$1,v4:v4,v5:v5$1,NIL:nil,version:version,validate:validate,stringify:stringify$1,parse:parse$1});const VOID=-1,PRIMITIVE=0,ARRAY=1,OBJECT=2,DATE=3,REGEXP=4,MAP=5,SET=6,ERROR=7,BIGINT=8,env="object"==typeof self?self:globalThis,deserializer=(t,n)=>{const i=(n,i)=>(t.set(i,n),n),e=r=>{if(t.has(r))return t.get(r);const[a,o]=n[r];switch(a){case 0:case-1:return i(o,r);case 1:{const t=i([],r);for(const n of o)t.push(e(n));return t}case 2:{const t=i({},r);for(const[n,i]of o)t[e(n)]=e(i);return t}case 3:return i(new Date(o),r);case 4:{const{source:t,flags:n}=o;return i(new RegExp(t,n),r)}case 5:{const t=i(new Map,r);for(const[n,i]of o)t.set(e(n),e(i));return t}case 6:{const t=i(new Set,r);for(const n of o)t.add(e(n));return t}case 7:{const{name:t,message:n}=o;return i(new env[t](n),r)}case 8:return i(BigInt(o),r);case"BigInt":return i(Object(BigInt(o)),r)}return i(new env[a](o),r)};return e},deserialize=t=>deserializer(new Map,t)(0),EMPTY="",{toString:toString}={},{keys:keys}=Object,typeOf=t=>{const n=typeof t;if("object"!==n||!t)return[0,n];const i=toString.call(t).slice(8,-1);switch(i){case"Array":return[1,""];case"Object":return[2,""];case"Date":return[3,""];case"RegExp":return[4,""];case"Map":return[5,""];case"Set":return[6,""]}return i.includes("Array")?[1,i]:i.includes("Error")?[7,i]:[2,i]},shouldSkip=([t,n])=>0===t&&("function"===n||"symbol"===n),serializer=(t,n,i,e)=>{const r=(t,n)=>{const r=e.push(t)-1;return i.set(n,r),r},a=e=>{if(i.has(e))return i.get(e);let[o,s]=typeOf(e);switch(o){case 0:{let n=e;switch(s){case"bigint":o=8,n=e.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+s);n=null;break;case"undefined":return r([-1],e)}return r([o,n],e)}case 1:{if(s)return r([s,[...e]],e);const t=[],n=r([o,t],e);for(const n of e)t.push(a(n));return n}case 2:{if(s)switch(s){case"BigInt":return r([s,e.toString()],e);case"Boolean":case"Number":case"String":return r([s,e.valueOf()],e)}if(n&&"toJSON"in e)return a(e.toJSON());const i=[],c=r([o,i],e);for(const n of keys(e))!t&&shouldSkip(typeOf(e[n]))||i.push([a(n),a(e[n])]);return c}case 3:return r([o,e.toISOString()],e);case 4:{const{source:t,flags:n}=e;return r([o,{source:t,flags:n}],e)}case 5:{const n=[],i=r([o,n],e);for(const[i,r]of e)(t||!shouldSkip(typeOf(i))&&!shouldSkip(typeOf(r)))&&n.push([a(i),a(r)]);return i}case 6:{const n=[],i=r([o,n],e);for(const i of e)!t&&shouldSkip(typeOf(i))||n.push(a(i));return i}}const{message:c}=e;return r([o,{name:s,message:c}],e)};return a},serialize=(t,{json:n,lossy:i}={})=>{const e=[];return serializer(!(n||i),!!n,new Map,e)(t),e},{parse:$parse,stringify:$stringify}=JSON,options={json:!0,lossy:!0},parse=t=>{return n=$parse(t),deserializer(new Map,n)(0);var n},stringify=t=>$stringify(serialize(t,options));var json=Object.freeze({__proto__:null,parse:parse,stringify:stringify});
//# sourceMappingURL=/sm/a35ab3486e7505763d6096b6b145536a060dab637914a5ed3dee9eac97f0bdd1.map